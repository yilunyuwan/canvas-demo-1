# Canvas 实践

## div 画点

### 步骤

1. 获取鼠标位置
2. 设置要画的点的合适位置与颜色，使得画出的点的圆心位于鼠标正中
3. 新建一个该样式下的 div 

### 缺点

通过新建 div 来画点，使得绘图过程卡顿不流畅。

### 解决方法

使用 canvas 来绘图

## canvas 画点

### 一些坑

- 不要用 CSS 来规定 canvas 的宽高

  canvas 标签类似于 img 标签，可以直接在属性处设置宽高，但会被 css 样式覆盖。如果在canvas 标签中设置了 `<canvas width="100" height="100">` 而又在 CSS 中使用了 `height:100vh; width: 100vw;`，得到的图形会很模糊，因为实际上 canvas 是从属性中的`<canvas withd="100" height="100">` 被直接拉伸到 `height:100vh; width: 100vw;`

  vh 和 vw 是 CSS 属性，不能用于 canvas 标签（HTML 属性） 

- body 的高度由里面的内容确定，并不是占满全屏幕的

## canvas 画线

### 画点的缺点

1. 只有网页可以用，手机无法画图。

2. 当鼠标拖动时间过快时，得到的是离散的间隔较大的点，现在希望能够得到连续流畅的线

### 解决方法

1. 增添手机触屏获取坐标来画点的代码 

2. 使用画线的方式。记录下上一刻鼠标的位置，以上一刻的位置为起点，此刻的位置为终点，画出线段。

   第一刻的起始点位于鼠标刚按下 / 触摸刚开始时，即 `canvas.onmousedown` / `canvas.ontouchstart`

### 改进

- 实现粗细条

  设置 `ctx.lineWidth`

- 设置粗线条后，得到的线断断续续

  修改 lineCap 值为 round，使得线段末端加了一个半圆

